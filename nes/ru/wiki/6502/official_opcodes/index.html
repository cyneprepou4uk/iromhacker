<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Яромхакеръ. Справочник по командам процессора</title>
<meta name="description" content="Официальные команды процессора NES 6502">
<meta name="keywords" content="">
<link rel="icon" href="https://iromhacker.ru/favicon.png" type="image/png">
<link href="https://iromhacker.ru/style.css" rel="stylesheet">
<script src="https://iromhacker.ru/analytics.js"></script>
</head>

<body>

<h1>Справочник по командам процессора</h1>
<p>
<center><a href="./index.html">Вернуться на главную страницу</a></center>
</p>
<br>

<p>
Статья для опытных пользователей. Необходимо знание регистров процессора, флагов и битов.
</p>

<p>
Здесь указаны все технические подробности механики работы команд с наглядными примерами. Опкоды команд, режимы адресации памяти и количество затрачиваемых тактов процессора смотри на скрине с командами.
</p>

<button class="spoiler">Скрин с командами</button>
<div class="panel">
<p>
Примечание: серые опкоды это команды для модифицированного эмуляторы Mednafen.
</p>

<p>
<img src="../images/6502.png">
</p>
</div>

<br>
<h2>Список команд процессора</h2>

<h3>ADC</h3>

<p>
Сложение байта из регистра A с другим байтом. Итоговый результат перезаписывает регистр A.
</p>

<h4>Флаг Z</h4>

<p>
Если результат сложения = #$00, то Z = 1, иначе Z = 0.
</p>

<p>
<span class="debugger_code">
Пример 1
LDA #$00
CLC
ADC #$00    ; A = #$00, Z = 1

Пример 2
LDA #$00
CLC
ADC #$01    ; A = #$01, Z = 0
</span>
</p>

<h4>Флаг N</h4>

<p>
Если результат сложения > #$7F, то N = 1, иначе Z = 0. Другими словами, состояние бита7 копируется во флаг N.
</p>

<p>
<span class="debugger_code">
Пример 1
LDA #$00
CLC
ADC #$7F    ; A = #$7F, N = 0

Пример 2
LDA #$00
CLC
ADC #$80    ; A = #$80, N = 1
</span>
</p>

<h4>Флаг C</h4>

<p>
Состояние флага C добавляется к результату сложения.
</p>

<p>
<span class="debugger_code">
Пример 1
LDA #$4E
CLC         ; C = 0
ADC #$12    ; A = #$60

Пример 2
LDA #$4E
SEC         ; C = 1
ADC #$12    ; A = #$61
</span>
</p>

<p>
Если итоговый результат сложения превышает #$FF, то C = 1, иначе C = 0. Другими словами, состояние бита8 копируется во флаг C.
</p>

<p>
<span class="debugger_code">
Пример 1
LDA #$4E
CLC
ADC #$B1    ; A = #$FF, C = 0

Пример 2
LDA #$4E
CLC
ADC #$С2    ; A = #$10, C = 1
</span>
</p>

<h4>Флаг V</h4>

<p>
Если итоговый результат сложения + C = #$80, то V = 1, иначе V = 0.
</p>

<p>
<span class="debugger_code">
Пример 1
LDA #$CA
CLC
ADC #$B5    ; A = #$7F, C = 1, V = 1

Пример 2
LDA #$24
CLC
ADC #$5C    ; A = #$80, C = 0, V = 1

Пример 3
LDA #$19
CLC
ADC #$66    ; A = #$7F, C = 0, V = 0
</span>
</p>

<h3>AND</h3>

<p>
Логическая операция И. Операция выполняется над битами регистра A и битами другого байта (B). Результат перезаписывает регистр A.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>A</td><td>0</td><td>0</td><td>1</td><td>1</td></tr>
<tr><td>B</td><td>0</td><td>1</td><td>0</td><td>1</td></tr>
<tr><td>Результат</td><td>0</td><td>0</td><td>0</td><td>1</td></tr>
</table>
</p>

<p>
<span class="debugger_code">
Пример
LDA #%11011010    ; A = #$DA
AND #%10101010    ; AND #$AA
    #%10001010    ; A = #$8A
</span>
</p>

<h3>ASL</h3>

<h3>BCC</h3>

<h3>BCS</h3>

<h3>BEQ</h3>

<h3>BIT</h3>

<h3>BMI</h3>

<h3>BNE</h3>

<h3>BPL</h3>

<h3>BRK</h3>

<h3>BVC</h3>

<h3>BCS</h3>

<h3>CLC</h3>

<p>
Выставление флага C = 0.
</p>

<h3>CLD</h3>

<p>
Выставление флага D = 0.
</p>

<h3>CLI</h3>

<p>
Выставление флага I = 0.
</p>

<h3>CLV</h3>

<p>
Выставление флага V = 0.
</p>

<h3>CMP</h3>

<p>
Сравнение регистра A с другим байтом.
</p>

<h3>CPX</h3>

<p>
Сравнение регистра X с другим байтом. Аналогично CMP.
</p>

<h3>CPY</h3>

<p>
Сравнение регистра Y с другим байтом. Аналогично CMP.
</p>

<h3>DEC</h3>

<h3>DEX</h3>

<h3>DEY</h3>

<p>
Аналогично DEX, только с регистром X.
</p>

<h3>EOR</h3>

<p>
Логическая операция исключающее ИЛИ. Операция выполняется над битами регистра A и битами другого байта (B). Результат перезаписывает регистр A.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>A</td><td>0</td><td>0</td><td>1</td><td>1</td></tr>
<tr><td>B</td><td>0</td><td>1</td><td>0</td><td>1</td></tr>
<tr><td>Результат</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
</table>
</p>

<p>
<span class="debugger_code">
Пример
LDA #%11011010    ; A = #$DA
AND #%10101010    ; AND #$AA
    #%10001010    ; A = #$8A
</span>
</p>

<h3>INC</h3>

<h3>INX</h3>

<p>
Аналогично INC, только с регистром X.
</p>

<h3>INY</h3>

<p>
Аналогично INC, только с регистром Y.
</p>

<h3>JMP</h3>

<p>
Прыжок на указанный адрес без возврата.
</p>

<h3>JSR</h3>

<h3>LDA</h3>

<p>
Копирование регистра A в указанный адрес.
</p>

<h3>LDX</h3>

<p>
Копирование регистра X в указанный адрес.
</p>

<h3>LDY</h3>

<p>
Копирование регистра Y в указанный адрес.
</p>

<h3>LSR</h3>

<h3>NOP</h3>

<p>
Команда ничего не делает. После выполнения этой команды процессор просто перейдет к следующей.
</p>

<h3>ORA</h3>

<p>
Логическая операция ИЛИ. Операция выполняется над битами регистра A и битами другого байта (B). Результат перезаписывает регистр A.
</p>

<h3>PHA</h3>

<h3>PHP</h3>

<h3>PLA</h3>

<h3>PLP</h3>

<h3>ROL</h3>

<h3>ROR</h3>

<h3>RTI</h3>

<h3>RTS</h3>

<h3>SBC</h3>

<h3>SEC</h3>

<p>
Выставление флага C = 1.
</p>

<h3>SED</h3>

<p>
Выставление флага D = 1.
</p>

<h3>SEI</h3>

<p>
Выставление флага I = 1.
</p>

<h3>STA</h3>

<p>
Копирование байта из регистра A в адрес.
</p>

<h3>STX</h3>

<p>
Копирование байта из регистра X в адрес.
</p>

<h3>STY</h3>

<p>
Копирование байта из регистра Y в адрес.
</p>

<h3>TAX</h3>

<p>
Копирование байта из регистра A в регистр X.
</p>

<h3>TAY</h3>

<p>
Копирование байта из регистра A в регистр Y. Аналогично TAX.
</p>

<h3>TSX</h3>

<p>
Копирование младшего байта из указателя стека в регистр X. Аналогично TAX.
</p>

<h3>TXA</h3>

<p>
Копирование байта из регистра X в регистр A.
</p>

<h4>Флаг Z</h4>

<p>
Если X = #$00, то Z = 1, иначе Z = 0
</p>

<h4>Флаг N</h4>

<p>
Если X > #$7F, то N = 1, иначе Z = 0
</p>

<h3>TXS</h3>

<p>
Копирование байта из регистра X в младший байт указателя стека. Аналогично TXA.
</p>

<h3>TYA</h3>

<p>
Копирование байта из регистра Y в регистр A. Аналогично TXA.
</p>

<br>
<br>
<br>

<script src="https://iromhacker.ru/spoiler.js"></script>

</body>

</html>