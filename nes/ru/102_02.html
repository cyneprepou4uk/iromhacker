<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Настройка эмулятора FCEUX</title>
<link rel="icon" href="../../favicon.png" type="image/png">

<!-- https://metrika.yandex.ru -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
   ym(54055780, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/54055780" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- https://metrika.yandex.ru -->

<link href="../../css_js/page_style.css" rel="stylesheet">

<!-- https://sorgalla.com/lity/ -->
<link href="../../css_js/lity.css" rel="stylesheet">
<script src="../../css_js/jquery.js"></script>
<script src="../../css_js/lity.js"></script>

<script id="chatBroEmbedCode">/* Chatbro Widget Embed Code Start */function ChatbroLoader(chats,async){async=!1!==async;var params={embedChatsParameters:chats instanceof Array?chats:[chats],lang:navigator.language||navigator.userLanguage,needLoadCode:'undefined'==typeof Chatbro,embedParamsVersion:localStorage.embedParamsVersion,chatbroScriptVersion:localStorage.chatbroScriptVersion},xhr=new XMLHttpRequest;xhr.withCredentials=!0,xhr.onload=function(){eval(xhr.responseText)},xhr.onerror=function(){console.error('Chatbro loading error')},xhr.open('GET','//www.chatbro.com/embed.js?'+btoa(unescape(encodeURIComponent(JSON.stringify(params)))),async),xhr.send()}/* Chatbro Widget Embed Code End */ChatbroLoader({encodedChatId: '83WQ5'});</script>

</head>

<body>

<h1>Настройка эмулятора FCEUX</h1>
<p>
<a href="https://romhacking.github.io/nes/index_ru.html" target="blank">Вернуться на главную страницу</a>
</p>

<p>
Сейчас настроим эмулятор под ромхакерские нужды. В нем куча настроек, но я буду говорить только про самое необходимое. Рекомендуется настраивать все, о чем здесь написано, остальное по желанию. Не обязательно менять стандартные клавиши для этих команд, тебе просто нужно как минимум ознакомиться с этими командами, а менять клавиши или нет ты решишь сам. Когда ознакомишься со статьей и все настроишь, можешь порыться в других настройках эмулятора, возможно отыщешь что-то полезное.
</p>

<div class="tip">
<p>
Про другие полезные настройки ты потом сможешь прочитать в отдельной статье (пока не знаю будет ли она вообще написана). Если уже сейчас нужна более подробная информация по возможностям эмулятора, можешь вызвать офлайн справку через <text class="path">Help -> Help...</text>, или читай ее <a href="http://www.fceux.com/web/help/fceux.html" target="blank">онлайн</a> (она на английском).
<br>
<br>
Твои настройки хранятся в конфигурационном файле <text class="file">fceux.cfg</text>. Файл обновляется после закрытия эмулятора, однако если вдруг эмулятор закрывается с ошибкой (или без ошибки, но все равно не по твоему хотению), новые настройки не будут сохранены. Можно вручную сохранить настройки в любое время через <text class="path">Config -> Save Config File</text>, сразу обновив файл конфигурации. Если ты вдруг что-то намудришь с настройками, из-за чего эмулятор не будет работать как положено, нужно закрыть эмулятор, удалить файл <text class="file">fceux.cfg</text>, запустить эмулятор и пошагово настраивать все заново, проверяя чтобы все было правильно после каждой настраиваемой опции.
</p>
</div>
<br>
<br>

<a name="000"></a><p class="title">Содержание</p>

<ul>
<li><a href=#001>Скачивание эмулятора</a></li>
<li><a href=#002>Открытие ROM'ов</a></li>
<li><a href=#003>Настройка управления</a></li>
<li><a href=#004>Горячие клавиши</a></li>
</ul>

<a name="001"></a><p class="subtitle">Скачивание эмулятора</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
<a href="https://ci.appveyor.com/project/zeromus/fceux/build/artifacts" target="blank">Тут</a> возьмешь самую новую сборку со всеми нововведениями и багфиксами. Если у тебя уже есть FCEUX (именно FCEUX, а не какие-то другие сочетания букв типа FCEUXD SP) более старой версии вроде 2.2.2 или 2.2.3, который ты качал с <a href="http://www.fceux.com/web/home.html" target="blank">официального</a> сайта, достаточно забрать из скачанного архива файл <text class="file">fceux.exe</text> и заменить у себя в корневой папке эмулятора. Твои уже существующие настройки сохранятся.
</p>

<div class="tip">
<p>
При желании можешь погуглить эмулятор с русифицированным интерфейсом, но я очень сомневаюсь что они обновляются, скорее всего эти переводы были сделаны на устаревших сборках. В принципе, то, что сборка устаревшая, не особо-то и страшно, однако в дальнейшем я буду рассказывать про некоторые вещи, которые сработают только на свежих сборках.
</p>
</div>

<a name="002"></a><p class="subtitle">Открытие ROM'ов</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Чтобы поиграть в какую-то игру, нужно найти <text class="object">ROM-файл</text> этой игры. Чаще всего это файл с расширением <text class="file">.nes</text>. <a href="https://rutracker.org/forum/viewtopic.php?t=4863566" target="blank">Отсюда</a> ты можешь скачать торрентом свежую сборку <text class="object">GoodNES</text> (или по <a href="magnet:?xt=urn:btih:210C18D48B56EB935B50098C2BDE4DD9A2C75F0A&tr=http%3A%2F%2Fbt4.t-ru.org%2Fann%3Fmagnet" target="blank">magnet-ссылке</a> если ты там не зарегистрирован), или скачать то же самое с моего <a href="https://cloud.mail.ru/public/BFSC/W6v9ywAKK" target="blank">облака</a>, где игры уже разложены по папкам. Архивы с расширением <text class="file">.7z</text> разархивируешь программой <a href="https://rarlab.com" target="blank">WinRAR</a> или <a href="https://www.7-zip.org" target="blank">7-Zip</a>.
</p>

<div class="tip">
<p>
<a href="https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D1%80%D0%B0%D0%B7_%D0%9F%D0%97%D0%A3" target="blank">ROM</a> - образ игры для эмуляторов. Если точнее, это двоичный (бинарный) файл, содержащий копию данных из микросхемы картриджа.
<br>
<br>
GoodNES - сборка всех существующих ROM'ов игр NES, а также относительно старые хаки этих игр. У некоторых игр могут быть несколько официальных названий, зависящих от страны, для которой они разрабатывались. Иногда быстрее загуглить нужный ROM по имени, чем пытаться найти его в этой сборке, хотя в последнее время скачать отдельные ROM'ы из интернета стало сложнее.
<br>
<br>
FCEUX умеет открывать не только файлы <text class="file">.nes</text>, но еще <text class="file">.fds</text> (Famicom Disk System), <text class="file">.nsf</text> (NES Sound Format) и <text class="file">.unif</text> (Universal NES Image Format).
</p>
</div>

<p>
Чтобы открыть ROM, надо запустить <text class="file">fceux.exe</text>, выбрать <text class="path">File -> Open ROM...</text>, а затем найти нужный файл по проводнику. Если хочешь ускорить процесс открытия ROM'ов, укажи <text class="file">fceux.exe</text> как программу по умолчанию для открытия файлов <text class="file">.nes</text>.
</p>

<p>
<a href="../../videos/001.mp4" data-lity><img src="../../css_js/video.png" width="128" height="128"></a>
</p>

<p>
Кстати, ты можешь запускать одновременно несколько копий эмулятора, например открыв старую и новую версию своего хака для проведения тестов.
</p>

<a name="003"></a><p class="subtitle">Настройка управления</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Если ты хочешь играть на USB-джойстике, его нужно сначала подключить по USB, а только потом запустить эмулятор, иначе тот может его не увидеть. Зайди в <text class="path">Config -> Input</text>. В разделе <text class="section">Port 1</text> выбери из списка <text class="object">Gamepad</text> (если он еще не выбран), затем кликни <text class="button">Configure</text>. В появившемся окне по очереди кликай на каждую из 8 кнопок в разделе <text class="section">Virtual Gamepad 1</text>. Когда появится всплывающее окошко, дважды нажми на нужную клавишу на клавиатуре, и окошко автоматически закроется.
</p>

<p>
<a href="../../videos/002.mp4" data-lity><img src="../../css_js/video.png" width="128" height="128"></a>
</p>

<div class="tip">
<p>
Эмулятор позволяет назначать до 4-х разных клавиш на одну игровую кнопку. Двойное нажатие на одну и ту же клавишу принудительно завершает настройку кнопки.
</p>
</div>

<p>
Наверняка тебе также понадобится настроить управление и для второго игрока. Проделываешь аналогичные действия в разделе <text class="section">Port 2</text>. Лучше настраивать управление на другие клавиши, чтобы они не пересекались с первым игроком.
</p>

<div class="tip">
<p>
В некоторых случаях одинаковое управление у одной или нескольких игровых кнопок может быть полезно, к примеру когда ты хочешь протестировать поведение обоих игроков при одновременном нажатии кнопки.
</p>
</div>

<p>
Настройка управления для 3-го/4-го игрока производится в разделе <text class="section">Port 1</text>/<text class="section">Port 2</text> соответственно, только настраивать нужно уже <text class="section">Virtual Gamepad 3</text>/<text class="section">Virtual Gamepad 4</text>. Лично я дублирую управление 1-го на 3-го и 2-го на 4-го, мне так удобнее. Для правильной работы управления 3-го и 4-го игроков нужно в главном окне поставить галочку <text class="object">Attach four-score</text> <text class="underline">или</text> выбрать <text class="path">Famicom Expansion Port -> 4-Player Adpter</text>, зависит от конкретной игры. Эти две опции могут конфликтовать между собой. В играх на 3/4 игрока используется либо первая, либо вторая. Если в игре управление не заработало, значит ты не угадал.
</p>

<p>
<a class="data-lity" href="../../images/001.png" data-lity><img height="200" src="../../images/001.png"></a>
</p>

<a name="004"></a><p class="subtitle">Горячие клавиши</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Зайди в <text class="path">Config -> Map Hotkeys...</text>, внизу выбери <text class="path">Filter: -> Assigned</text>. Фильтр отобразит только команды с уже настроенными горячими клавишами. Некоторые из них могут конфликтовать с теми, которые ты настроил под управление в игре. Просмотри весь список и смело затирай конфликтующие. Для затирания дважды кликни левой кнопкой мыши по строке с командой, в появившемся окошке нажми <text class="button">Clear</text>. Для сохранения настроек нажми <text class="button">OK</text> справа внизу.
</p>

<p>
<a href="../../videos/003.mp4" data-lity><img src="../../css_js/video.png" width="128" height="128"></a>
</p>

<p>
В этом же меню настрой вот эти рекомендованные команды - внизу в <text class="section">Filter:</text> выбирай соответствующий пункт из списка, например <text class="section">Misc.</text>. На данный момент некоторые клавиши по описанию могут показаться тебе не слишком полезными, но они в дальшейшем понадобятся. Команды, не описанные в статье, настраивай по своему усмотрению. В случае чего всегда можно вернуть настройки по умолчанию, нажав на кнопку <text class="button">Restore Defaults</text> слева внизу.
</p>

<p>
<a href="../../videos/004.mp4" data-lity><img src="../../css_js/video.png" width="128" height="128"></a>
</p>

<div class="tip">
<p>
Можно настраивать комбинации служебных клавиш (<text class="button">Shift</text>, <text class="button">Alt</text>, <text class="button">Ctrl</text> и др.) с обычными клавишами, в этом случае служебная клавиша должна быть нажата первой и удержана во время нажатия дополнительной обычной клавиши.
</p>
</div>

<h2>Filter: Speed</h2>

<p>
<li><strong>Speed Down</strong> - каждое последующее нажатие замедляет игру в 2 раза.</li>
<li><strong>Speed Up</strong> - каждое последующее нажатие ускоряет игру. Основное назначение кнопки - вернуться к нормальной скорости после использования <text class="object">Speed Down</text>. Теоретически можно ускорить эмулятор максимум в 64 раза, но на практике это не получается. Возможно у меня слишком медленный ноутбук.</li>
<li><strong>Turbo</strong> - при удержании эмулятор будет работать с максимально возможной скоростью (быстрее, чем через <text class="object">Speed Up</text>). Максимальная скорость зависит от производительности твоего компьютера, а также от того, как сильно ты нагрузишь эмулятор всякими ромхакерскими примочками.</li>
</p>

<div class="tip">
<p>
Для отображения текущей скорости работы эмулятора жми <text class="path">Config -> Display -> FPS</text>. Скорость также влияет на время исчезновения различных сообщений эмулятора на экране.
</p>
</div>

<h2>Filter: State</h2>

<p>
Использование сохранений игрового процесса очень полезно. Ты можешь сделать сохранение перед каким-то игровым моментом, и затем загружать это сохранение, просматривая его снова и снова, параллельно изменяя код в игре и наблюдая как это сказывается на ней. Тебе выделено 10 слотов, пользуйся. Чем продуманнее и точнее будут твои сохранения, тем эффективнее ты будешь работать. Их можно делать также во время паузы эмулятора.
</p>

<div class="tip">
<p>
Файлы сохранений хранятся в папке <text class="path">fcs</text> с расширением файла от <text class="file">.fc0</text> до <text class="file">.fc9</text>, в зависимости от записанного слота. Если изменить номер в расширении файла, изменится и номер слота для эмулятора. Имя файла соответствует названию ROM'а, на котором это сохранение было сделано. Ты можешь скидывать своим знакомым ромхакерам эти файлы вместе с ROM'ом, чтобы они тоже смогли запустить его и помочь тебе решить проблему.
<br>
<br>
Если переименовать файл сохранения, то ROM с оригинальным названием его не увидит. Однако ты можешь специально переименовывать файл под другой ROM, чтобы проверить сохранение на нем. Например, у тебя есть сохранение с неким багом, и ты захотел проверить починился ли он на более новой версии. Этот прием не всегда работает, ведь сохраненное игровое состояние на одном ROM'е может не подойти к другому, но если заранее подготовить правильное сохранение (либо правильно его подкорректировав), то это вполне может получиться.
</p>
</div>

<p>
<li><strong>Savestate Slot 0-9</strong> - выбрать слот для сохранения игрового процесса. Если на слоте еще нету сохранения, он будет прозрачным, а если есть, то выделен серым цветом. Я думаю тут не нужно ничего менять, довольно удобно пользоваться клавишами 0-9. Слот 0 я оставляю для самых важных сохранений.</li>
<li><strong>Save State</strong> - сохранить на выбранный слот.</li>
<li><strong>Load State</strong> - загрузиться с предварительно выбранного слота. Если слот пустой, эмулятор выдаст на экране сообщение об ошибке.</li>
</p>

<div class="tip">
<p>
Эмулятор, находясь на паузе, иногда не показывает на экране никаких сообщений про сохранение, загрузку, отображение слота и прочее, но это не означает что действие не было произведено. Ты будешь постоянно сталкиваться с этим во время работы с Debugger'ом в эмуляторе.
</p>
</div>

<h2>Filter: Misc.</h2>

<p>
<li><strong>Power</strong> - другое название <text class="button">Hard Reset</text>, как при выключении и затем включении питания на реальной приставке. Функция аналогична новому открытию ROM'а. Все игровые данные будут сброшены. Альтернатива горячей клавише - <text class="path">NES -> Power</text>.</li>
<li><strong>Reset</strong> - обычный игровой сброс (<text class="button">Soft Reset</text>), как при нажатии кнопки <text class="button">Reset</text> на реальной приставке. Некоторые игровые данные могут быть сохранены после <text class="button">Reset</text>, например рекорд по количеству игровых очков (Hi-Score), это зависит от самой игры. Альтернатива горячей клавише - <text class="path">NES -> Reset</text>.</li>
<li><strong>Pause</strong> - временная приостановка эмуляции игры. Этой же кнопкой можно снять паузу с эмулятора. Альтернатива горячей клавише - <text class="path">NES -> Emulation Speed -> Pause</text>.</li>
<li><strong>Frame Advance</strong> - если эмулятор не стоит на паузе, то выставляется пауза при нажатии. Если стоит, то разовое нажатие клавиши проматывает эмуляцию игры на 1 кадр вперед, удержание запустит в игру в обычном режиме до отпускания. При отпускании клавиши игра ставится на паузу, которую можно снять через <text class="button">Pause</text>. Большинство игр идут со скоростью 60 кадров в секунду (60 FPS у игр региона <a href="https://ru.wikipedia.org/wiki/NTSC" target="blank">NTSC</a>, 50 FPS у региона <a href="https://ru.wikipedia.org/wiki/PAL" target="blank">PAL</a>), и ты можешь покадрово проматывать игру вперед, например чтобы более точно подобраться к какому-то игровому моменту.</li>
<li><strong>Undo/Redo Savestate</strong> - позволяет отменить сохранение, если ты его ошибочно перезапишешь, или же отменить эту отмену сохранения. При каждом сохранении создается бэкап-файл, состоящий из предыдущего сохранения этого слота, но горячая клавиша работает только для самого последнего сохранения, которое ты делал. Ты также можешь отменить откат до бэкапа, вернув свою перезапись сохранения. Если нужно восстановить другое сохранение, надо делать это вручную, удалив оригинальный файл и переименовав бэкап в папке <text class="path">fcs</text>.</li>
</p>

<h2>Filter: Tools</h2>

<p>
<li><strong>Open ROM</strong> - быстрое открытие ROM'a. Довольно удобная фича.</li>
</p>

<h2>Filter: Conflicts</h2>

<p>
После всех настроек загляни сюда, чтобы убедиться что нету конфликтов клавиш с другими командами, поменяй если нужно. И на этом пока все.
</p>

<br>
<hr>
<br>

<div id="sigCommentsBlock"></div>
<script type="text/javascript">
	(function(){
		var host_id = '3239';
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.async = true;
		script.src = '//sigcomments.com/chat/?host_id='+host_id;
		var ss = document.getElementsByTagName('script')[0]; 
		ss.parentNode.insertBefore(script, ss);
	})();
</script>

</body>

</html>