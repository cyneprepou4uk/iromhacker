<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>ЯРомхакеръ. Ромхакинг NES. Hex Editor. ROM File</title>
		<meta name="description" content="Описание режима отображения памяти ROM File эмулятора FCEUX">
		<meta name="keywords" content="">
		<link rel="icon" href="https://iromhacker.ru/favicon.png" type="image/png">
		<link href="https://iromhacker.ru/style.css" rel="stylesheet">
		<script src="https://iromhacker.ru/analytics.js"></script>
	</head>
	<body>
		<h1>ROM File</h1>
		<p>
			<center>
				<a href="https://iromhacker.ru/nes/ru/index.html">Вернуться на главную страницу</a>
			</center>
		</p>
		<p>
			<center>
				<a href="https://translate.google.com/translate?sl=ru&tl=en&u=https://iromhacker.ru/nes/ru/fceux/debug/hex_editor/2-4/index.html" target="_blank">Translate this page into English</a>
			</center>
		</p>
		<br>
		<br>
		<p class="title">
			Содержание
		</p>
		<ul>
			<li><a href="../1/index.html">Описание окна Hex Editor</a></li>
			<li><a href="../2/index.html">Вкладка View</a></li>
			<ul>
				<li><a href="../2-1/index.html">NES Memory</a></li>
				<ul>
					<li><a href="../2-1-1/index.html">Заморозка адресов</a></li>
				</ul>
				<li><a href="../2-2/index.html">PPU Memory</a></li>
				<li><a href="../2-3/index.html">OAM Memory</a></li>
				<li>ROM File</li>
			</ul>
			<li><a href="../3/index.html">Прочие возможности окна</a></li>
			<ul>
				<li><a href="../3-1/index.html">Закладки</a></li>
				<li><a href="../3-2/index.html">Поиск</a></li>
				<li><a href="../3-3/index.html">Файл .tbl</a></li>
			</ul>
		</ul>
		<h2>ROM File</h2>
		<p>
			Этот режим отображает байты из файла ROM'а как в любом другом Hex-редакторе (за некоторым исключением). Размер окна варьируется от размера ROM'а и наличия CHR.
		</p>
		<p class="tip">
			В статьях адреса из ROM File будут записаны пятью символами и с префиксом 0x, чтобы отличать их от адресов NES Memory.
		</p>
		<p>
			Самая первая строчка является хедером, которая содержит информацию для эмулятора, чтобы тот знал как именно эмулировать данный файл. Расшифровку байтов хедера можно посмотреть в эмуляторе через Help -> Message Log.
		</p>
		<p>
			<img src="1.png">
		</p>
		<p>
			При попытке изменить байт в хедере, эмулятор не позволит тебе это сделать и предложит воспользоваться окном iNES Header Editor (вкладка Debug в эмуляторе FCEUX).
		</p>
		<p class="tip">
			Если вставить в хедер байты из буфера обмена, сообщение с предложением будет выскакивать столько раз, сколько байтов хереда ты в итоге попытался ими изменить.
		</p>
		<p class="tip">
			Если не знаешь что делаешь, не стоит редактировать байты хедера. Хедер нужно редактировать при изменении маппера и расширении ROM'а.
		</p>
		<p>
			Далее идут байты памяти PRG ROM, начиная с 0x00010. Размер PRG определяется хедером.
		</p>
		<p>
			С учтетом размера PRG, после него идут байты CHR ROM. Если в игре нету CHR ROM, значит она использует CHR RAM, и последние 8 KB в окне будут дублировать диапазон $0000-$1FFF из PPU Memory, изменение которых будет также изменять и байты PPU Memory.
		</p>
		<p class="tip">
			CHR RAM вкратце означает, что байты для тайлов, которые находятся в PRG и скорее всего хранятся в сжатом формате, будут вручную записаны в видеопамять после распаковки. В этом есть свои преимущества и недостатки.
		</p>
		<h2>Подсветка байтов</h2>
		<h3>Измененные байты</h3>
		<p>
			Ручное изменение байтов в ROM File подсвечивается красным цветом.
		</p>
		<p>
			<img src="2.png">
		</p>
		<p class="tip">
			Подсветку можно использовать в личных целях, например чтобы отметить начало и конец некого участка с байтами. Кликни на байт, затем нажми Ctrl + C и Ctrl + V.
		</p>
		<p>
			Изменения байтов отменяются через Ctrl + Z (или во вкладке Edit). Комбинацию можно удерживать чтоб отменить изменения быстрее. При нажатии комбинации Hex Editor перемещает тебя в ROM File к месту отмены изменения, если это место вне видимости или если включен другой режим во вкладке View, и произойдет отмена одного изменения.
		</p>
		<p class="tip">
			Такой "телепорт" к месту отмены изменения можно использовать в качестве закладки для быстрого перехода к тому месту, где ты редактируешь байты, например когда тебе нужно посмотреть на адреса RAM. Скопируй любой байт поблизости и вставь его по тому же месту. Лучше несколько раз для страховки, просто кликай по байту и жми Ctrl + V.
		</p>
		<p class="tip">
			Если открыть другой ROM без предварительного сохранения изменений, красная подсветка байтов останется, однако байты превратятся в байты текущего ROM'а. Твои проделанные изменения потеряются и не будут влиять на эту игру.
		</p>
		<h3>Использованные байты PRG</h3>
		<p>
			При работе с окном Code/Data Logger (вкладка Debug в эмуляторе FCEUX), байты, которые были каким-либо образом использованы в игре, будут иметь цветную подсветку. Остальные байты останутся черного цвета.
		</p>
		<p>
			<img src="3.png">
		</p>
		<p>
			Поскольку содержимое ROM File обновляется только при взаимодействии пользователя с окном Hex Editor, для отслеживания обновления подсветки нужно, например, кликать на байты или нажимать стрелки на клавиатуре.
		</p>
		<p class="tip">
			Подробнее узнаешь в разделе с окном Code/Data Logger. 
		</p>
		<br>
		<br>
		<br>
		<script src="https://iromhacker.ru/spoiler.js"></script>
	</body>
</html>