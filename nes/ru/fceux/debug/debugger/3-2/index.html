<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>ЯРомхакеръ. Ромхакинг NES. Debugger. Создание брейкпоинтов</title>
		<meta name="description" content="Различные способы создания брейкпоинтов в эмуляторе FCEUX через окна Debugger и Hex Editor">
		<meta name="keywords" content="">
		<link rel="icon" href="https://iromhacker.ru/favicon.png" type="image/png">
		<link href="https://iromhacker.ru/style.css" rel="stylesheet">
		<script src="https://iromhacker.ru/analytics.js"></script>
		<script src="//code.jivosite.com/widget.js" data-jv-id="zKD0D0d1vR" async></script>
	</head>
	<body>
		<h1>Создание брейкпоинтов</h1>
		<p>
			<center>
				<a href="https://iromhacker.ru/nes/ru/index.html">Вернуться на главную страницу</a>
			</center>
		</p>
		<p>
			<center>
				<a href="https://translate.google.com/translate?sl=ru&tl=en&u=https://iromhacker.ru/nes/ru/fceux/debug/debugger/3-2/index.html">Translate this page into English</a>
			</center>
		</p>
		<br>
		<p class="title">
			Содержание
		</p>
		<ul>
			<li><a href="../1/index.html">Описание окна Debugger</a></li>
			<li><a href="../2/index.html">Регистры и флаги</a></li>
			<li><a href="../3/index.html">Брейкпоинты</a></li>
			<ul>
				<li><a href="../3-1/index.html">Хранение списка брейкпоинтов</a></li>
				<li>Создание брейкпоинтов</li>
				<li><a href="../3-3/index.html">Основные типы брейкпоинтов</a></li>
				<li><a href="../3-4/index.html">Дополнительные условия брейкпоинтов</a></li>
				<ul>
					<li><a href="../3-4-1/index.html">Операторы сравнения</a></li>
					<li><a href="../3-4-2/index.html">Арифметические операторы</a></li>
					<li><a href="../3-4-3/index.html">Логические операторы</a></li>
				</ul>
				<li><a href="../3-5/index.html">Прочие типы брейкпоинтов</a></li>
			</ul>
			<li><a href="../4/index.html">Кнопки для отладки кода</a></li>
			<li><a href="../5/index.html">Комментирование кода и адресов</a></li>
			<ul>
				<li><a href="../5-1/index.html">Хранение списка комментариев</a></li>
				<li><a href="../5-2/index.html">Редактирование .nl файлов</a></li>
			</ul>
			<li><a href="../6/index.html">Редактирование кода</a></li>
			<ul>
				<li><a href="../6-1/index.html">Inline Assembler</a></li>
				<li><a href="../6-2/index.html">ROM Data Editor</a></li>
			</ul>
			<li>Прочая информация в окне и его возможности</li>
		</ul>
		<br>
		<p class="tip">
			Брейкпоинт можно создавать как через Hex Editor, так и через Debugger. Независимо от того, как именно был создан брейкпоинт, после создания он отобразится в общем списке брейкпоинтов.
		</p>
		<h2>Создание через Hex Editor</h2>
		<p>
			Создание брейкпоинтов через Hex Editor обычно гораздо быстрее, нежели при ручном создании через Debugger. Возможности создания брейкпоинта через Hex Editor ограничены, но часто и этого вполне достаточно.
		</p>
		<p>
			Можно создавать Read, Write и Execute брейкпоинты для адресов NES Memory и PPU Memory, кликнув правой кнопкой по адресу (или по предварительно выделенному диапазону адресов).
		</p>
		<p>
			<img src="7.png">
		</p>
		<p class="tip">
			При создании брейкпоинта по адресам NES Memory $8000-$FFFF, в поле ввода Condition будет автоматически добавлено условие T==# со значением номера банка PRG.
		</p>
		<p class="tip">
			Если после запуска эмулятора окно Debugger'а не было предварительно открыто вручную, а также если в файле .deb имеется некое количество брейкпоинтов, то при добавлении брейкпоинта через Hex Editor он будет помещен в начало списка, а самый нижний брейкпоинт списка файла .deb превратится в брейкпоинт на адрес NES Memory $0000, в котором будут удалены все условия.
		</p>
		<h2>Создание через Debugger</h2>
		<p>
			Нажав кнопку Add под списком брейкпоинтов, появится окно Add Breakpoint для создания брейкпоинта, в котором ты указываешь необходимые условия.
		</p>
		<p>
			<img src="1.png">
		</p>
		<h3>Условие на адрес</h3>
		<p>
			Обязательное условие. Рядом с Address есть 2 поля для ввода адреса.
		</p>
		<p>
			<img src="2.png">
		</p>
		<p>
			Оба поля служат для указания диапазона адресов. В поле слева вводится начальный адрес диапазона, а в поле справа - конец диапазона. Если оставить поле справа пустым, то условие брейкпоинта будет распространяться только на один единственный адрес, указанный в поле слева.
		</p>
		<p>
			<img src="6.png">
		</p>
		<p>
			Адрес может быть записан только с использованием цифр и латинскимх букв A-F, другие символы не допускаются. Лишние нули слева указывать в адресе не обязательно.
		</p>
		<p class="tip">
			Диапазон адресов может быть любой величины, вплоть до $0000-$FFFF. Максимальный диапазон зависит от условия на тип памяти.
		</p>
		<p class="tip">
			Если сработало условие брейкпоинта, в котором прописан диапазон адрес, понять какой именно из этих адресов вызвал срабатывание можно будет лишь глядя на команду, на которой остановилось выполнение кода.
		</p>
		<button class="spoiler">Мелкие детали</button>
		<div class="panel">
		<p>
			Если оставить поле слева пустым, то брейкпоинт удалится при попытке его создать.
		</p>
		<p>
			Если продублировать адрес поля слева в поле справа, это никак не повлияет на условие брейкпоинта, но он будет отображаться в списке как диапазон адресов.
		</p>
		<p>
			Диапазон адресов, указанный в обратном порядке, например $000F-$0000, не будет работать, несмотря на то, что такой брейкпоинт добавится в список.
		</p>
		<p>
			При использовании недопустимого символа, все символы справа от него, включая сам символ, удаляются при попытке создать брейкпоинт. Для пользователей с русской раскладкой клавиатуры часто будет встречаться ситуация, когда, например, при попытке добавить адрес $07C5, введя русскую букву С, в итоге в условии окажется адрес $0007.
		</p>
		</div>
		<h4>Адреса с именами</h4>
		<p>
			Для каждого из трех видов прерываний процессора (Reset, NMI и IRQ) есть сокращенное обозначение, которое можно ввести в поле ввода адреса. Reset = RST, NMI = NMI (или VBL), IRQ = IRQ.
		</p>
		<p class="tip">
			Младшие и старшие байты адресов обработчиков этих прерываний указаны в NES Memory по адресам $FFFA-$FFFF. Но вместо того, чтобы просматривать эти байты и вычислять адрес самостоятельно, достаточно ввести нужное сокращение, и адрес будет автоматически выставлен при сохранении брейкпоинта.
		</p>
		<p>
			Эти сокращения очень удобно использовать при ручном создании брейкпоинтов с условием Execute.
		</p>
		<p class="tip">
			Сокращения также можно вводить в поле ввода кнопки Seek To и при создании закладок.
		</p>
		<h3>Условие на тип брейкпоинта</h3>
		<p>
			Необязательное условие, однако без него брейкпоинт работать не будет. Здесь задается тип (вид) брейкпоинта.
		</p>
		<p>
			<img src="5.png">
		</p>
		<p>
			Read - чтение, Write - запись, Execute - выполнение, Forbit - запрет.
		</p>
		<p>
			Тип брейкпоинта указан во флагах 3-6 в списке брейкпоинтов буквами R, W, X и F соответственно.
		</p>
		<p>
			<img src="9.png">
		</p>
		<p class="tip">
			Типы брейкпоинта будут описаны в соответствующей статье.
		</p>
		<h3>Условие на тип памяти</h3>
		<p>
			Обязательное условие. В разделе Memory указывается тип памяти.
		</p>
		<p>
			<img src="3.png">
		</p>
		<p>
			CPU Mem = NES Memory, PPU Mem = PPU Memory, Sprite Mem = OAM Memory.
		</p>
		<p class="tip">
			Read и Write брейкпоинты на адреса из PPU Memory будут срабатывать на командах, работающих с адресом $2006, поскольку он является регистром видеопроцессора, через который осуществляется чтение и запись байтов в видеопамять.
		</p>
		<p>
			Для PPU Memory максимальный диапазон адресов $0000-$3FFF, для Sprite Memory - $0000-$00FF.
		</p>
		<p class="tip">
			Превышение диапазона фильтруется через маску. Маска адресов PPU Memory - $3FFF, Sprite Memory - $00FF.
		</p>
		<p>
			Тип памяти указан вторым флагом в списке брейкпоинтов буквами C, P или S соответственно.
		</p>
		<p>
			<img src="8.png">
		</p>
		<h3>Дополнительное условие</h3>
		<p>
			Необязательное условие. В поле ввода Condition можно вводить дополнительные уточняющие условия для срабатывания созданного брейкпоинта.
		</p>
		<p>
			<img src="4.png">
		</p>
		<p>
			Если в после Condition записано некое условие, этот факт отображается в списке брейкпоинтов.
		</p>
		<p>
			<img src="10.png">
		</p>
		<p class="tip">
			Дополнительные условия будут описаны в соответствующей статье.
		</p>
		<h3>Название брейкпоинта</h3>
		<p>
			В поле ввода Name можно дать имя своему брейкпоинту (необязательно). Это не повлияет на его условия.
		</p>
		<p>
			<img src="11.png">
		</p>
		<p>
			Имя будет отображаться в списке брейкпоинтов. Помещается всего несколько символов.
		</p>
		<p>
			<img src="12.png">
		</p>
		<p class="tip">
			Если у переименованного брейкпоинта есть условие в поле Condition, в списке все равно будет отображаться только имя.
		</p>
		<br>
		<br>
		<br>
		<script src="https://iromhacker.ru/spoiler.js"></script>
	</body>
</html>