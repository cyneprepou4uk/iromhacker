<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>ЯРомхакеръ. Ромхакинг NES. Debugger. Кнопки для отладки кода</title>
		<meta name="description" content="Описание работы кнопок Run, Step Into, Step Out, Step Over, Run Line, 128 Lines, Seek To и Seek PC в эмуляторе FCEUX">
		<meta name="keywords" content="">
		<link rel="icon" href="https://iromhacker.ru/favicon.png" type="image/png">
		<link href="https://iromhacker.ru/style.css" rel="stylesheet">
		<script src="https://iromhacker.ru/analytics.js"></script>
	</head>
	<body>
		<h1>Кнопки для отладки кода</h1>
		<p>
			<center>
				<a class="return" href="https://iromhacker.ru/nes/ru/index.html">Вернуться на главную страницу</a>
			</center>
		</p>
		<p class="content">
			Содержание
		</p>
		<ul>
			<li><a href="../1/index.html">Описание окна Debugger</a></li>
			<li><a href="../2/index.html">Регистры и флаги</a></li>
			<li><a href="../3/index.html">Брейкпоинты</a></li>
			<ul>
				<li><a href="../3-1/index.html">Создание брейкпоинтов</a></li>
				<ul>
					<li><a href="../3-1-1/index.html">Типы брейкпоинтов</a></li>
					<li><a href="../3-1-2/index.html">Дополнительные условия</a></li>
				</ul>
				<li><a href="../3-2/index.html">Прочие типы брейкпоинтов</a></li>
			</ul>
			<li>Кнопки для отладки кода</li>
			<li><a href="../5/index.html">Комментирование кода и адресов</a></li>
			<ul>
				<li><a href="../5-1/index.html">Хранение списка комментариев</a></li>
				<li><a href="../5-2/index.html">Редактирование .nl файлов</a></li>
			</ul>
			<li><a href="../6/index.html">Редактирование кода и данных</a></li>
			<li>Прочая информация в окне и его возможности</li>
		</ul>
		<h2>Список кнопок</h2>
		<p>
			Эти 8 кнопок в основном используются во время паузы эмулятора.
		</p>
		<p>
			<img src="1.png">
		</p>
		<h3>Run</h3>
		<p>
			Снимает эмулятор с паузы. Аналогично горячей клавише Pause, но этой кнопкой нельзя поставить эмулятор на паузу.
		</p>
		<p>
			<img src="https://i.imgur.com/MmkfnwI.gif"><!--0002-->
		</p>
		<p class="tip">
			Если после нажатия кнопки сработает брейкпоинт, эмулятор снова станет на паузу.
		</p>
		<h3>Step Into</h3>
		<p>
			Используется для пошагового выполнения кода, обычно после срабатывания брейкпоинта. 1 нажатие = выполнить 1 инструкцию по адресу, указанному рядом с кнопкой Seek PC, после чего эмулятор снова станет на паузу.
		</p>
		<p>
			<img src="https://i.imgur.com/ht5Ydhi.gif"><!--0001-->
		</p>
		<p class="tip">
			Во время нажатия кнопки любые другие брейкпоинты не срабатывают и в списке не выделяются.
		</p>
		<p class="tip">
			Если эмулятор не находится на паузе, то нажатие кнопки приостановит эмуляцию на 240-й сканлинии, где обычно выполняется бесконечный цикл в ожидании VBlank. Подробнее читай в разделах с графикой.
		</p>
		<h3>Step Out</h3>
		<p>
			Нажатием кнопки можно выйти из текущей подпрограммы. Технически кнопка является брейкпоинтом с условием "остановить эмуляцию при выполнении инструкции <text class="opcode">RTS</text> для выхода из текущей подпрограммы".
		</p>
		<p>
			<img src="https://i.imgur.com/iJrcOoq.gif"><!--0003-->
		</p>
		<p>
			После нажатия кнопки будет выполнен оставшийся код в подпрограмме и выход из нее. А когда эмулятор станет на паузу, ты получишь итоговые состояния регистров и флагов, а также увидишь обновления в счетчике тактов и инструкций.
		</p>
		<p class="tip">
			Если в процессе работы кнопки Step Out выход из текущей или из внутренней подпрограммы был совершен через способ наподобие PLA + PLA + RTS, условие кнопки по итогу так никогда и не выполнится (вероятно потому что цепочка выходов будет нарушена по логике эмулятора), хоть работа кнопки в действительности не прекращается.
		</p>
		<p>
			Если во время выполнения кода подпрограммы после нажатия кнопки сработают какие-то активные брейкпоинты, то код остановится на месте срабатывания брейкпоинта вместо выхода из подпрограммы. Чтобы вновь попытаться выйти из подпрограммы, нужно нажать кнопку Run.
		</p>
		<p class="tip">
			Кнопку Run нужно нажимать потому, что работа кнопки Step Out еще не закончена при срабатывании другого брейкпоинта. Если после нажатия Run других срабатываний брейкпоинтов не будет, эмулятор встанет на паузу после выхода из подпрограммы, поскольку условие Step Out будет выполнено.
		</p>
		<p class="tip">
			Если вместо Run повторно нажать кнопку Step Out, вылезет окошко с предупреждением, что кнопка все еще в процессе работы. Выбрав "Да", ты подтвердишь нажатие кнопки Step Out, и условие кнопки будет выставлено повторно с учетом той подпрограммы, в которой ты оказался. Выбрав "Нет", ты отменишь свое нажатие кнопки.
		</p>
		<h3>Step Over</h3>
		<p>
			Эта кнопка нужна для быстрого выполнения кода внутри подпрограммы. Если код остановился на инструкции <text class="opcode">JSR</text>, нажми на эту кнопку, и код внутри подпрограммы, указанной в инструкции <text class="opcode">JSR</text>, будет выполнен.
		</p>
		<p>
			<img src="https://i.imgur.com/hWF5v4f.gif"><!--0004-->
		</p>
		<p class="tip">
			Если нажать на кнопку при выполнении инструкции, отличной от JSR, она сработает как кнопка Step Into.
		</p>
		<p>
			Условие кнопки аналогично брейкпоинту с условием Execute на адрес, где расположена следующая после <text class="opcode">JSR</text> инструкция.
		</p>
		<p class="tip">
			Кнопка Step Over по принципу работает точно также, как и кнопка Step Out. Она тоже является брейкпоинтом с особым условием, и с соответствующими последствиями, касаемых паузы эмулятора, обновления данных и срабатывания других брейкпоинтов во время ее работы.
		</p>
		<p>
			Поскольку код не всегда совершает выход из подпрограммы, в которую он вошел, или после выхода может оказываться не там, где ты того ожидаешь, условие кнопки может так и не выполниться, и эмуляция игры просто продолжится как при нажатии кнопки Run. Однако условие брейкпоинта кнопки все еще будет активно.
		</p>
		<p class="tip">
			Иногда это приводит к тому, что Debugger может неожиданно приостановить эмуляцию, когда условие кнопки наконец выполнится, и будет казаться, что Debugger остановил игру просто так.
		</p>
		<h3>Run Line</h3>
		<p>
			Проматывает эмуляцию игры вперед на 1 сканлинию (в районе 114 тактов), после чего эмулятор становится на паузу.
		</p>
		<p class="tip">
			Если эмулятор не находится на паузе, то нажатие кнопки приостановит эмуляцию на 241-й сканлинии.
		</p>
		<p class="tip">
			Если во время работы кнопки срабатывают другие брейкпоинты, нужно нажать кнопку Run как в случае с кнопкой Step Out. Если вместо Run повторно нажать Run Line, работа кнопки начнется заново (без дополнительных предупреждений).
		</p>
		<h3>128 Lines</h3>
		<p>
			Проматывает эмуляцию игры вперед на 128 сканлиний (примерно 14600 тактов). Работает по тому же принципу, что и кнопка Run Line.
		</p>
		<p class="tip">
			Если эмулятор не находится на паузе, то нажатие кнопки приостановит эмуляцию на 106-й сканлинии (для PAL на 64-й).
		</p>
		<h3>Seek To</h3>
		<p>
			Кнопка работает как закладка. Ты можешь кликать по 16-битным адресам в Debugger'е, и адрес будет автоматически скопирован в эту кнопку. Затем нажми на кнопку для перехода по этому адресу. А чтобы не потеряться, нажми на кнопку Seek PC для возврата к месту выполнения кода (если эмулятор на паузе).
		</p>
		<p>
			<img src="https://i.imgur.com/MdUHXyq.gif"><!--0005-->
		</p>
		<p class="tip">
			Например, ты можешь посмотреть код, который находится внутри подпрограммы, без необходимости выполнять инструкцию с прыжком на эту подпрограмму ради просмотра ее кода.
		</p>
		<p>
			В эту кнопку можно вводить сокращения RST, NMI (или VBL) и IRQ для перехода на адреса обработчиков сооветствующих прерываний процессора.
		</p>
		<p class="tip">
			Правила записи адреса аналогичны записи адреса при создании брейкпоинта, с соответствующими последствиями.
		</p>
		<h3>Seek PC</h3>
		<p>
			Эта кнопка работает только на паузе эмулятора. В ней указан адрес, по которому собирается выполниться следующая инструкция. Слева от такого адреса находится стрелочка, а байты этой инструкции, вместе с адресом и номером банка PRG, выделены синим цветом.
		</p>
		<p>
			<img src="2.png">
		</p>
		<p class="tip">
			Если эмулятор не находится на паузе, нажатие кнопки ни к чему не приведет.
		</p>
		<p class="tip">
			Стрелочка и выделение текста синим цветом не отображаются, если эмулятор не стоит на паузе.
		</p>
		<p>
			Адрес, записанный в кнопке, можно менять вручную, и затем нажать на эту кнопку, чтобы переместить место выполнения кода (стрелочку) на другой адрес. Подходит для тестирования кода.
		</p>
		<p>
			<img src="https://i.imgur.com/VodQDKF.gif"><!--0006-->
		</p>
		<p class="tip">
			Обычно удобнее кликнуть на 16-битный адрес в Debugger'е слева от инструкции и скопировать его через Ctrl + C, затем дважды кликнуть по адресу в поле ввода Seek PC для его выделения и вставить новый адрес через Ctrl + V, нежели записывать этот адрес вручную.
		</p>
		<p class="tip">
			Debugger сразу сообщит об ошибке при попытке ввода недопустимого символа.
		</p>
		<script src="https://iromhacker.ru/spoiler.js"></script>
		<script src="https://iromhacker.ru/tab.js"></script>
	</body>
</html>