<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>ЯРомхакеръ. Debugger эмулятора FCEUX</title>
		<meta name="description" content="ОписаниеСтатьи">
		<meta name="keywords" content="">
		<link rel="icon" href="https://iromhacker.ru/favicon.png" type="image/png">
		<link href="https://iromhacker.ru/style.css" rel="stylesheet">
		<script src="https://iromhacker.ru/analytics.js"></script>
	</head>
	<body>
		<h1>Debugger</h1>
		<p>
			<center>
				<a href="https://iromhacker.ru/nes/ru/index.html">Вернуться на главную страницу</a>
			</center>
		</p>
		<br>
		<p class="title">
			Содержание
		</p>
		<ul>
			<li>Описание окна</li>
			<li>Регистры и флаги</li>
			<li>Breakpoint'ы</li>
			<ul>
				<li>Основные виды Breakpoint'ов</li>
				<li>Дополнительные условия</li>
				<li>Прочие виды Breakpoint'ов</li>
			</ul>
			<li>Кнопки</li>
			<li>Комментарии</li>
			<li>Закладки</li>
			<li>Прочая информация</li>
		</ul>
		<br>
		<h2>Описание окна</h2>
		<p class="tip">
			Ознакомься с окном Hex Editor перед прочтением раздела.
		</p>
		<p>
			Debugger предназначен для изучения работы кода игры, а также для редактирования кода. Основная работа с ним осуществляется на паузе эмулятора, в частности после срабатывания Breakpoint'ов.
		</p>
		<p>
			Окно Debugger'а вызывается в эмуляторе через Debug -> Debugger. Предварительно нужно запустить игру.
		</p>
		<p>
			<img src="1.png">
		</p>
		<p>
			Окно охватывает все адреса NES Memory, интерпретируя байты в этих адресах как код. Код в играх находится по адресам $8000-$FFFF.
		</p>
		<p>
			<img src="2.png">
		</p>
		<p class="tip">
			Значительно реже код также может находиться на батарейке $6000-$7FFF и в RAM $0000-$07FF.
		</p>
		<p class="tip">
			Не весь код, который отображает Debugger, на самом деле является кодом. Окно просто интерпретирует байты в адресах. Достаточно легко отличить реальный код от обычных байтов, которые являются какими-то данными.
		</p>
		<p>
			Здесь отображаются команды процессора (инструкции).
		</p>
		<p>
			<img src="3.png">
		</p>
		<p>
			Эти команды получаются исходя из байтов, которые находятся слева. Эти байты называются называются опкоды.
		</p>
		<p>
			<img src="4.png">
		</p>
		<p class="tip">
			У одной и той же команды, например команды <text class="opcode">LDA</text>, может быть несколько разновидностей. Режим адресации, которую использует команда, зависит от ее разновидности. Разновидность команды указывается нужным опкодом.
		</p>
		<p>
			После опкода записан операнд команды. Расшифровка операнда отображается справа от команды.
		</p>
		<p>
			<img src="6.png">
		</p>
		<p>
			У некоторых команд отсутствует операнд, у других он размером 1 или 2 байта. Размер операнда зависит от разновидности команды. Debugger считывает опкод, вычисляет размер операнда, и отображает следующую команду по списку с учетом общего размера команды.
		</p>
		<p class="tip">
			Например, команда <text class="opcode">TXA</text> по адресу $82A0 в сумме занимает 1 байт, поэтому следующим опкодом по мнению Debugger'а является байт по адресу $82A1 ($82A0 + 1). Здесь находится команда <text class="opcode">AND</text>, разновидность которой в сумме занимает 2 байта, значит следующая команда должна находиться по адресу $82A3 ($82A1 + 2), где отображена команда <text class="opcode">STA</text>.
		</p>
		<p>
			После знака "=" отображен байт, который находится по указанному адресу в NES Memory.
		</p>
		<p>
			<img src="7.png">
		</p>
		<p class="tip">
			Нижние 2 байта относятся к адресам, выделенным серым цветом, а не зеленым.
		</p>
		<p>
			Если адрес, с которым работает команда, вычисляется через индексную или непрямую адресацию, итоговый адрес будет отображен после знака "@".
		</p>
		<p>
			<img src="8.png">
		</p>
		<p class="tip">
			Этот итоговый адрес может отличаться в разное время. Правильный адрес гарантированно получается только тогда, когда код выполняет эту команду. Если эмулятор не находится на паузе, тогда точно не стоит обращать внимание на эти адреса. Это касается и байтов после знака "=".
		</p>
		<p>
			Здесь отображен адрес команды из NES Memory.
		</p>
		<p>
			<img src="9.png">
		</p>
		<p>
			Слева от него указан номер банка PRG.
		</p>
		<p>
			<img src="10.png">
		</p>
		<p class="tip">
			Банк - кусок памяти из ROM File, подключенный в NES Memory.
		</p>
		<br>
		<br>
		<br>
		<script src="https://iromhacker.ru/spoiler.js"></script>
	</body>
</html>