<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Системы счисления</title>
<link rel="icon" href="../../favicon.png" type="image/png">

<!-- https://metrika.yandex.ru -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
   ym(54055780, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/54055780" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- https://metrika.yandex.ru -->

<link href="../../css_js/page_style.css" rel="stylesheet">

<!-- https://sorgalla.com/lity/ -->
<link href="../../css_js/lity.css" rel="stylesheet">
<script src="../../css_js/jquery.js"></script>
<script src="../../css_js/lity.js"></script>

<script id="chatBroEmbedCode">/* Chatbro Widget Embed Code Start */function ChatbroLoader(chats,async){async=!1!==async;var params={embedChatsParameters:chats instanceof Array?chats:[chats],lang:navigator.language||navigator.userLanguage,needLoadCode:'undefined'==typeof Chatbro,embedParamsVersion:localStorage.embedParamsVersion,chatbroScriptVersion:localStorage.chatbroScriptVersion},xhr=new XMLHttpRequest;xhr.withCredentials=!0,xhr.onload=function(){eval(xhr.responseText)},xhr.onerror=function(){console.error('Chatbro loading error')},xhr.open('GET','//www.chatbro.com/embed.js?'+btoa(unescape(encodeURIComponent(JSON.stringify(params)))),async),xhr.send()}/* Chatbro Widget Embed Code End */ChatbroLoader({encodedChatId: '83WQ5'});</script>

</head>

<body>

<h1>Системы счисления</h1>
<p>
<a href="https://romhacking.github.io/nes/index_ru.html" target="blank">Вернуться на главную страницу</a>
</p>

<p>
Первое, с чем сталкивается ромхакер, это 2 новые системы счисления - <text class="object">шестнадцатеричная</text> и <text class="object">двоичная</text>. Для лучшего их понимания вспомним как работает наша обычная повседневная десятичная система счисления.
</p>

<a name="000"></a><p class="title">Содержание</p>

<ul>
<li><a href=#001>Десятичная система счисления</a></li>
<li><a href=#002>Шестнадцатеричная система счисления</a></li>
<li><a href=#003>Двоичная система счисления</a></li>
<li><a href=#004>Signed и unsigned байты</a></li>
<li><a href=#005>Использование калькулятора</a></li>
<li><a href=#006>Заключение</a></li>
</ul>

<a name="001"></a><p class="subtitle">Десятичная система счисления</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
В <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D1%81%D1%8F%D1%82%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" target="blank">десятичной</a> (decimal) системе <text class="object">DEC</text> за основу взято число 10, как следует из названия системы. В ней мы располагаем десятью знаками-цифрами - от 0 до 9. Когда счет достигает 9, то для следующего числа вводится новый разряд - десятки, а единицы обнуляются и счет начинается снова (10). После 19 разряд десятков увеличивается на 1, а единицы снова обнуляются (20). И так далее. Когда десятки и единицы доходят до 9 (99), то для следующего числа вводится третий разряд – сотни, а единицы и десятки обнуляются (100).
</p>

<a name="002"></a><p class="subtitle">Шестнадцатеричная система счисления</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Число в <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D1%81%D1%8F%D1%82%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" target="blank">шестнадцатеричной</a> (hexadecimal) системе <text class="object">HEX</text> называется <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B0%D0%B9%D1%82" target="blank">байт</a>. В ромхакинге ты будешь постоянно иметь дело с байтами. В эмуляторе FCEUX второй разряд (десятки) будет отображаться всегда, даже если он = 0, и в статьях я буду делать то же самое. В системе HEX за основу взято число 16. Так как существует только 10 цифр (0-9), дополнительно используются первые 6 латинских букв - <text class="object">A</text> (10), <text class="object">B</text> (11), <text class="object">C</text> (12), <text class="object">D</text> (13), <text class="object">E</text> (14) и <text class="object">F</text> (15). Когда счет достигает 16, второй разряд (десятки) увеличивается на 1, а первый разряд (единицы) обнуляется.
</p>

<p>
В этой таблице наглядно показано как работает система HEX в отличие от DEC.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>DEC</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td></td><td>17</td></td><td>18</td><td>...<td>30</td></td><td>31</td><td>32</td><td>...</td><td>255</td></tr>
<tr><td>HEX</td><td>00</td><td>01</td><td>02</td><td>03</td><td>04</td><td>05</td><td>06</td><td>07</td><td>08</td><td>09</td><td>0A</td><td>0B</td><td>0C</td><td>0D</td><td>0E</td><td>0F</td><td>10</td><td>11</td><td>12</td><td>...<td>1E</td></td><td>1F</td><td>20</td><td>...</td><td align="center">FF</td></tr>
</table>
</p>

<p>
Чтобы в своих статьях отличать байты от обычных десятичных чисел, для байтов я буду использовать префикс <text class="object">#</text>. Если в статье написано просто число 19, это будет DEC-число. Если же написано <text class="object">#</text>19, это уже HEX-число.
</p>

<div class="tip">
<p>
В некоторых документах, которые ты можешь встретить в интернете, HEX-числа пишутся с постфиксом <text class="object">h</text> (<text class="object">h</text>exadecimal), и выглядит это как 19<text class="object">h</text>. Также они могут записываться с префиксом <text class="object">0x</text>, например <text class="object">0x</text>19. Я тоже буду использовать префикс <text class="object">0x</text> (для указания адреса в ROM File) и постфикс <text class="object">h</text> (для указания размера памяти в количестве байтов). Из других статей станет понятно что это значит.
</p>
</div>

<a name="003"></a><p class="subtitle">Двоичная система счисления</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
<a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B2%D0%BE%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" target="blank">Двоичная</a> (binary) система <text class="object">BIN</text> тесно связана с шестнадцатеричной, как в ромхакинге, так и в компьютерной сфере в целом. BIN-число называется <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B8%D1%82" target="blank">бит</a>. В процессоре NES существуют команды, которые работают исключительно с битами, и это расширит твои возможности при написании кода.
</p>

<p>
В BIN-системе за основу взято число 2, и в ней используются всего 2 цифры - 0 и 1. NES это 8-битная игровая платформа, это означает что процессор умеет работать только с 8-битными числами. Из 8-ми битов, которые будут равны либо 0, либо 1, можно составить 256 комбинаций, из которых мы получаем байты от #00 до #FF.
</p>

<div class="tip">
<p>
Дальнейшее развитие игровых платформ позволяет использовать больше битов одновременно. Например SNES (Super Nintendo Entertainment System) - 16-битная платформа. Это означает, что процессору SNES можно скормить максимально возможное число 65535 (#FFFF), в то время как NES может обработать лишь 255 (#FF). Несмотря на такое ограничение, в NES все же можно успешно работать с 16-битными (или крупнее) числами, об этом ты узнаешь в других статьях.
</p>
</div>

<p>
Биты нумеруются с нулевого по седьмой, справа налево.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>№ бита</td><td>7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td align="center">BIN</td><td>10000000</td><td>01000000</td><td>00100000</td><td>00010000</td><td>00001000</td><td>00000100</td><td>00000010</td><td>00000001</td></tr>
</table>
</p>

<p>
В таблице показаны первые 16 чисел в каждой из трех систем счисления. Биты под номерами 4-7 будут = 0. В будущем я буду показывать все 8 бит сразу, даже если там нули, но в таблице я их опустил для экономии места. Как видно из таблицы, при увеличении числа новые разряды у битов вводятся довольно быстро, потому что разряд ограничен лишь числами 0 и 1.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>DEC</td><td align="right">0</td><td align="right">1</td><td align="right">2</td><td align="right">3</td><td align="right">4</td><td align="right">5</td><td align="right">6</td><td align="right">7</td><td align="right">8</td><td align="right">9</td><td align="right">10</td><td align="right">11</td><td align="right">12</td><td align="right">13</td><td align="right">14</td><td align="right">15</td></tr>
<tr><td>HEX</td><td align="right">00</td><td align="right">01</td><td align="right">02</td><td align="right">03</td><td align="right">04</td><td align="right">05</td><td align="right">06</td><td align="right">07</td><td align="right">08</td><td align="right">09</td><td align="right">0A</td><td align="right">0B</td><td align="right">0C</td><td align="right">0D</td><td align="right">0E</td><td align="right">0F</td></tr>
<tr><td>BIN</td><td>0000</td><td>0001</td><td>0010</td><td>0011</td><td>0100</td><td>0101</td><td>0110</td><td>0111</td><td>1000</td><td>1001</td><td>1010</td><td>1011</td><td>1100</td><td>1101</td><td>1110</td><td>1111</td></tr>
</table>
</p>

<p>
У битов есть очень полезное свойство, удобное для восприятия - каждая четверка разрядов битов, называемая <text class="object">ниббл</text> (полубайт), соответствует одной цифре шестнадцатеричной системе счисления. Другими словами, биты 0-3 влияют на первую (правую) цифру байта, а биты 4-7 - на вторую (левую) цифру. Возьмем для примера байт #3C, который при переводе в биты = 0011 1101. Если разложить этот байт на 2 цифры, мы получим #3 и #C. #3 = 0011, #C = 1101. Если взять для примера #33, в битах это будет 0011 0011, а если #CC, то мы получим 1101 1101. 
</p>

<div class="tip">
<p>
В некоторых документах нибблы могут быть написаны слитно, а также возможна запись префикса <text class="object">%</text> (используется в некоторых языках программирования) или постфикса <text class="object">b</text> (<text class="object">b</text>inary), например <text class="object">%</text>00111101 или 00111101<text class="object">b</text>. Я считаю это излишним, ведь и так понятно что комбинация из 8 нулей и единиц это биты, и буду разделять нибблы пробелом без дополнительных символов - 0011 1101.
</p>
</div>

<a name="004"></a><p class="subtitle">Signed и unsigned байты</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Байты по умолчанию являются положительными числами исходя из нашего восприятия чисел. Однако к байтам все же можно прикрутить знак <text class="object">+</text> или <text class="object">-</text>, смотря как на него посмотреть, это станет более понятно при дальнейшем обучении. Если рассматривать байт просто как <text class="object">unsigned</text> (беззнаковый), байты #00-#FF это десятичные числа 0-255.
</p>

<p>
В процессоре NES за знаковость байта отвечает 7й бит, то есть самый последний (левый). И если рассматривать байт как <text class="object">signed</text> (знаковый), то когда 7-й бит = 0, байт будет положительным, а если бит = 1, тогда отрицательным. Отсюда следует, что байты #00-#7F (0-127) - положительные, а байты #80-#FF (от -128 до -1) - отрицательные.
</p>

<div class="tip">
<p>
Возможно не совсем очевидно откуда берется такой переход десятичных чисел, то есть почему байт #7F = 127, а следующий байт #80 = -128. Ответ находится в этой таблице, за середину которой взят байт #00, а список байтов в диапазоне #00-#FF и постоянно идет по кругу по нарастающей.
<br>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td>HEX</td><td align="center">...</td><td align="center">80</td><td align="center">81</td><td align="center">82</td><td align="center">...</td><td align="center">FD</td><td align="center">FE</td><td align="center">FF</td><td align="center"><strong>00</strong></td><td align="center">01</td><td align="center">02</td><td align="center">03</td><td align="center">...</td><td align="center">7D</td><td align="center">7E</td><td align="center">7F</td><td align="center">80</td><td align="center">81</td><td align="center">82</td><td align="center">...</td></tr>
<tr><td>DEC</td><td align="center">...</td><td align="center">-128</td><td align="center">-127</td><td align="center">-126</td><td align="center">...</td><td align="center">-3</td><td align="center">-2</td><td align="center">-1</td><td align="center"><strong>0</strong></td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">...</td><td align="center">125</td><td align="center">126</td><td align="center">127</td><td align="center">-128</td><td align="center">-127</td><td align="center">-126</td><td align="center">...</td></tr>
</table>
</p>
</div>

<a name="005"></a><p class="subtitle">Использование калькулятора</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Чтобы самостоятельно не переводить числа из одной системы в другую, достаточно воспользоваться стандартным калькулятором Windows. Калькулятор вызывается через <text class="path">Пуск -> Все программы -> Стандартные</text>. Или же нажми комбинацию клавиш <text class="button">Win</text> + <text class="button">R</text> (<text class="button">Win</text> это клавиша на клавиатуре с логотипом Windows), в появившемся окне введи <text class="object">calc</text> и нажми <text class="button">Enter</text>. Советую также закрепить его на панели задач, наверняка ты будешь часто им пользоваться. В калькуляторе нужно выбрать <text class="path">Вид -> Программист</text>.
</p>

<p>
<a href="../../videos/005.mp4" data-lity><img src="../../css_js/video.png" width="128" height="128"></a>
</p>

<div class="tip">
<p>
Дробные числа не работают в режиме <text class="section">Программист</text>. При делении ты получишь целое число без остатка, хотя изредка именно такой результат тебе и будет нужен. Для классической работы с десятичными числами переключись обратно на <text class="section">Обычный</text> режим.
</p>
</div>

<p>
Переключаясь между опциями <text class="section">DEC</text> и <text class="section">HEX</text>, калькулятор будет автоматически переводить записанное число в другую систему счисления. Если ты находишься на <text class="section">HEX</text>, не обязательно переключать раскладку клавиатуры на английскую чтобы вводить числа латинскими буквами.
</p>

<p>
<a class="data-lity" href="../../images/156.png" data-lity><img height="200" src="../../images/156.png"></a>
</p>

<p>
Можно кликать левой кнопкой мыши по отдельным битам в строчке, переключаяя их состояние на 0/1, формируя из них новые байты. В большинстве случаев нас интересуют только первые 8 бит, и чаще всего тебе нужно будет предварительно переключиться на <text class="section">HEX</text>. Если в калькуляторе уже было введено какое-то число, именно оно и будет меняться.
</p>

<p>
<a class="data-lity" href="../../images/157.png" data-lity><img height="200" src="../../images/157.png"></a>
</p>

<div class="tip">
<p>
Чтобы лишний раз убедиться в правильности знакового числа, нужно выбрать <text class="section">DEC</text>, ввести десятичное число, например 128, поменять его знак нажатием на специальную кнопку <text class="button">+/-</text>, затем выбрать режим <text class="section">1 байт</text> (оставив только первые 8 бит как в NES и отключив обработку остальных старших битов) и переключиться на <text class="section">HEX</text>. Режим <text class="section">8 байт</text> выставляется по умолчанию после запуска калькулятора.
<br>
<br>
<p align="center">
<a class="data-lity" href="../../images/155.png" data-lity><img height="200" src="../../images/155.png"></a>
</p>
</p>
</div>

<a name="006"></a><p class="subtitle">Заключение</p>
<p>
<a href=#000>Назад к содержанию</a>
</p>

<p>
Байт #00 также является числом, к этому следует привыкать. В ромхакинге отсутствие чего-либо тоже может быть важно, например если у игрока закончились жизни, то есть если количество жизней = #00, в игре наступит Game Over. К тому же во множестве случаев отсчет некого количества начитается с #00, например объекты под номерами #00-#05 это 6 разных объектов (#00, #01, #02, #03, #04 и #05). Отсюда следует, что байт #FF можно рассматривать как 255 при переводе в DEC, так и 256 при отсчете от #00 до #FF (ведь у нас 256 байтов).
</p>

<p>
Напоследок покажу в таблице еще одну закономерность при переводе из одной системы в другую. Впоследствии она поможет тебе лучше понимать механику некоторых команд процессора и как работает управление в играх, а также чтобы сэкономить тебе немного времени при простом вычислении байтов и битов без помощи калькулятора. Десятичными числами выступают степени двойки.
</p>

<p>
<table border=1 cellspacing=1 cellpadding=5>
<tr><td align="center">DEC</td><td align="center">HEX</td><td align="center">BIN</td></tr>
<tr><td align="center">0</td><td align="center">00</td><td align="center">0000 0000</td></tr>
<tr><td align="center">1</td><td align="center">01</td><td align="center">0000 0001</td></tr>
<tr><td align="center">2</td><td align="center">02</td><td align="center">0000 0010</td></tr>
<tr><td align="center">4</td><td align="center">04</td><td align="center">0000 0100</td></tr>
<tr><td align="center">8</td><td align="center">08</td><td align="center">0000 1000</td></tr>
<tr><td align="center">16</td><td align="center">10</td><td align="center">0001 0000</td></tr>
<tr><td align="center">32</td><td align="center">20</td><td align="center">0010 0000</td></tr>
<tr><td align="center">64</td><td align="center">40</td><td align="center">0100 0000</td></tr>
<tr><td align="center">128</td><td align="center">80</td><td align="center">1000 0000</td></tr>
</table>
</p>

<br>
<hr>
<br>

<div id="sigCommentsBlock"></div>
<script type="text/javascript">
	(function(){
		var host_id = '3239';
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.async = true;
		script.src = '//sigcomments.com/chat/?host_id='+host_id;
		var ss = document.getElementsByTagName('script')[0]; 
		ss.parentNode.insertBefore(script, ss);
	})();
</script>

</body>

</html>