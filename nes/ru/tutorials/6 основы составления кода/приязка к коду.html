<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Ромхакинг NES. Основы редактирования кода игры</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link rel="icon" href="https://cyneprepou4uk.github.io/iromhacker/favicon.png" type="image/png">
		<link href="https://cyneprepou4uk.github.io/iromhacker/style.css" rel="stylesheet">
		<script src="https://cyneprepou4uk.github.io/iromhacker/analytics.js"></script>
	</head>
	<body>
		<h1>Основы редактирования кода игры</h1>
		<h2>Основы редактирования кода игры</h2>
		<p class="notice">
			Для ознакомления с разделом требуется знание инструкций процессора и опыт работы с эмулятором FCEUX.
		</p>
		<p>
			Выполнение большинства игрового кода в конечном итоге сводится к тому, чтобы отобразить на экране нужную графику и воспроизвести звуки/музыку. Без изображения на экране и звуков ты не узнаешь что в игре что-то произошло.
		</p>
		<p>
			Код состоит из множества программ, которые отвечают за некую игровую функцию. Если говорить в общем смысле, то все они подготавливают данные графики/музыки для передачи информации в видеопроцессор и аудиопроцессор.
		</p>
		<p>
			До тех пор, пока игра не передаст эти данные, еще можно успеть что-то изменить, подменив данные на другие. Так как 1 целый кадр - довольно большая величина измерения в масштабе выполненного кода, у тебя появляется куча вариантов того, где именно следует внести изменения.
		</p>
		<h3>Поиск нужной программы</h3>
		<p>
			Поиск осуществляется через нахождение адресов, отвечающих за определенную функцию. При помощи брейкпоинтов и работы с Debugger'ом ты определяешь код, который работает с этими адресами. Все это было описано в предыдущих разделах.
		</p>
		<h3>Как повлиять на изменения</h3>
		<p>
			Чтобы что-то изменить в игре, требуется отредактировать код программы. Обычно удобнее всего это делать в том месте, где код игры уже обрабатывает определенную игровую функцию. Ты можешь внести изменения в процесс подготовки данных, или подождать когда данные будут подготовлены, а затем подменить некоторые из них на свои.
		</p>
		<p>
			Еще одним вариантом является частичная или полная перезапись кода на свой вариант программы, но делать это, естественно, сложнее, так как требует больше опыта в программировании NES.
		</p>
		<p>
			В некоторых более простых случаях, например для изменения палитры, чаще всего достаточно подменить один или несколько несколько байтов в таблице данных палитры.
		</p>
		<h3>На что обращать внимание</h3>
		<p>
			При редактировании кода надо быть еще более внимательным, чем при обычном просмотре кода в Debugger'е и его пошаговом выполнении. Ведь если ты напишешь свой код неправильно, он не будет работать, а в худшем случае привет к появлению багов в игре или к зависанию.
		</p>
		<p>
			Требуется следить за значениями регистров и состоянием флагов процессора. Поскольку ты скорее всего будешь размещать свой новый код в найденном свободном месте и вызывать его, надо аккуратно подготовить прыжок в свою подпрограмму и выход из нее, чтобы случайно не задеть что-то лишнее.
		</p>
		<p>
			Также требуется изучить программу и по возможности найти все прыжки и условные переходы на тот участок программы, который ты будешь редактировать. То есть надо знать при каких условиях будет выполнен этот участок кода, и как часто он будет выполняться.
		</p>
		<p>
			Обо всем этом будет подробно рассказано в следующих статьях.
		</p>
		<script src="https://cyneprepou4uk.github.io/iromhacker/spoiler.js"></script>
		<script src="https://cyneprepou4uk.github.io/iromhacker/tab.js"></script>
	</body>
</html>